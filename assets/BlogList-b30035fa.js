import{d as B,o as u,a as _,h as k,I as E,e as a,t as d,_ as I,c as f,u as s,m as y,F as z,k as F,b as x,E as M,D as T,r as S,Q as H,M as O,l as L,w as R,H as C,z as Q,O as q,p as j}from"./index-89374393.js";import{u as A}from"./useFetchData-4d762871.js";import{c as G}from"./blog-f64ed5e5.js";import{f as J}from"./formatDate-8ee1ee0b.js";import{u as K}from"./useMainScroll-baefc7ec.js";const U={class:"empty-container"},W=B({__name:"index",props:{text:{default:"无数据"}},setup(b){const v=b;return(t,r)=>(u(),_("div",U,[k(E,{type:"empty"}),a("p",null,d(v.text),1)]))}});const X=I(W,[["__scopeId","data-v-381c5bb2"]]),Y={key:0,class:"pager-container"},Z=["onClick"],P=B({__name:"index",props:{current:{default:1},total:{default:300},limit:{default:10},visibleNumber:{default:10}},emits:["pageChange"],setup(b,{emit:v}){const t=b,r=f(()=>Math.ceil(t.total/t.limit)),g=f(()=>{let e=t.current-t.visibleNumber/2;return e<1&&(e=1),e}),c=f(()=>{let e=t.current+t.visibleNumber/2;return e>r.value&&(e=r.value),e}),h=f(()=>{let e=[];for(let o=g.value;o<=c.value;o++)e.push(o);return e}),i=e=>{e<1&&(e=1),e>r.value&&(e=r.value),e!=t.current&&v("pageChange",e)};return(e,o)=>s(r)>1?(u(),_("div",Y,[a("a",{onClick:o[0]||(o[0]=l=>i(1)),class:y({disabled:t.current==1})},"|<<",2),a("a",{onClick:o[1]||(o[1]=l=>i(t.current-1)),class:y({disabled:t.current==1})},"<<",2),(u(!0),_(z,null,F(s(h),(l,p)=>(u(),_("a",{onClick:m=>i(l),key:p,class:y({active:t.current==l})},d(l),11,Z))),128)),a("a",{onClick:o[2]||(o[2]=l=>i(t.current+1)),class:y({disabled:t.current==s(r)})},">>",2),a("a",{onClick:o[3]||(o[3]=l=>i(s(r))),class:y({disabled:t.current==s(r)})},">>|",2)])):x("",!0)}});const ee=I(P,[["__scopeId","data-v-cc09ad23"]]),te={key:0,class:"img-container"},ae=["alt"],se={class:"main-container"},oe={class:"title"},ne={class:"aside"},re={class:"desc"},le=B({__name:"BlogList",setup(b){const{proxy:v}=j(),t=M(),r=T(),g=S(null);K(g);const c=f(()=>{const l=t.params.categoryId||-1,p=+t.query.limit||10,m=+t.query.page||1;return{categoryId:l,limit:p,page:m}}),h=async()=>await G(c.value.page,c.value.limit,c.value.categoryId),{dataRef:i,isLoadingRef:e}=A(h);H(()=>t.query,async()=>{e.value=!0,g.value.scrollTop=0,i.value=await h(),e.value=!1});const o=l=>{const p={page:l,limit:c.value.limit};c.value.categoryId==-1?r.push({name:"Blog",query:p}):r.push({name:"BlogCategory",query:p,params:{categoryId:c.value.categoryId}})};return(l,p)=>{var D,N,$;const m=O("Router-link"),V=L("lazy"),w=L("loading");return R((u(),_("div",{class:"blogList-container",ref_key:"blogList",ref:g},[a("ul",null,[(u(!0),_(z,null,F((D=s(i))==null?void 0:D.rows,n=>(u(),_("li",{key:n.id},[n.thumb?(u(),_("div",te,[k(m,{to:{name:"BlogDetail",params:{id:n.id}}},{default:C(()=>[R(a("img",{alt:n.title},null,8,ae),[[V,{src:n.thumb,proxy:s(v)}]])]),_:2},1032,["to"])])):x("",!0),a("div",se,[a("div",oe,[k(m,{to:{name:"BlogDetail",params:{id:n.id}}},{default:C(()=>[a("h1",null,d(n.title),1)]),_:2},1032,["to"])]),a("div",ne,[a("span",null,"日期："+d(s(J)(n.createDate)),1),a("span",null,"浏览量:"+d(n.scanNumber),1),a("span",null,"评论数："+d(n.commentNumber),1),k(m,{to:{name:"BlogCategory",params:{categoryId:n.category.id}}},{default:C(()=>[Q(d(n.category.name),1)]),_:2},1032,["to"])]),a("div",re,d(n.description),1)])]))),128))]),s(e)?x("",!0):(u(),q(ee,{key:0,current:s(c).page,limit:s(c).limit,total:(N=s(i))==null?void 0:N.total,visiblNumber:10,onPageChange:o},null,8,["current","limit","total"])),(($=s(i))==null?void 0:$.rows.length)==0&&!s(e)?(u(),q(X,{key:1})):x("",!0)])),[[w,s(e)]])}}});const pe=I(le,[["__scopeId","data-v-a299dfbd"]]);export{pe as default};
