import{d as I,r as t,c as $,o as p,a as f,b as U,e as g,n as D,u as w,_ as b,f as Y,g as N,h as L,t as B,i as V,j as F,s as X,w as S,F as H,k as E,I as M,v as T,l as j,m as A}from"./index-89374393.js";import{u as O}from"./common-a7911900.js";const P={class:"image-loader-container"},q=["src"],G=["src"],J=I({__name:"index",props:{src:null,placeholder:null,duration:{default:500}},emits:["load"],setup(R,{emit:o}){const d=R,i=t(!1),l=t(!1),e=$(()=>i.value?1:0),c=()=>{i.value=!0,l.value=!0,o("load"),setTimeout(()=>{l.value=!0,o("load")},d.duration)};return(u,s)=>(p(),f("div",P,[l.value?U("",!0):(p(),f("img",{key:0,class:"placeholder",src:d.placeholder,alt:""},null,8,q)),g("img",{onLoad:c,src:d.src,alt:"",style:D({opacity:w(e),transition:`${d.duration}ms`})},null,44,G)]))}});const K=b(J,[["__scopeId","data-v-1e57e3a7"]]),Q=I({__name:"Carouselitme",props:{carousel:null},setup(R){const o=R,d=t(0),i=t(0),l=t(0),e=t(0),c=t(0),u=t(0),s=t(null),v=t(null),_=t(null),x=t(null),y=$(()=>({x:l.value.width/2,y:l.value.height/2})),n=$(()=>{if(!l.value||!e.value)return;const a=l.value.width-e.value.width,m=l.value.height-e.value.height,C=a/l.value.width*c.value,W=m/l.value.height*u.value;return{transform:`translate(${C}px, ${W}px)`}});Y(()=>{var a;d.value=(a=s.value)==null?void 0:a.clientWidth,i.value=v.value.clientWidth,r(),c.value=y.value.x,u.value=y.value.y,window.addEventListener("resize",r)}),N(()=>{window.removeEventListener("resize",r)});const r=()=>{var a,m,C,W;_.value||x.value||(l.value={width:(a=_.value)==null?void 0:a.clientWidth,height:(m=_.value)==null?void 0:m.clientHeight},e.value={width:(C=x.value)==null?void 0:C.clientWidth,height:(W=x.value)==null?void 0:W.clientHeight})},z=()=>{s.value.style.opacity="1",s.value.style.width="0",s.value.clientWidth,s.value.style.transition="all 1s",s.value.style.width=d.value+"px",v.value.style.opacity="1",v.value.style.width="0",v.value.clientWidth,v.value.style.transition="all 1s 1s",v.value.style.width=i.value+"px"},k=a=>{const m=_.value.getBoundingClientRect();c.value=a.clientX-m.left,u.value=a.clientY-m.top},h=a=>{c.value=y.value.x,u.value=y.value.y};return(a,m)=>(p(),f("div",{class:"carouselitem-container",ref_key:"carouselitem",ref:_,onMousemove:k,onMouseleave:h},[g("div",{class:"carousel-img",style:D(w(n)),ref_key:"image",ref:x},[L(K,{onLoad:z,src:o.carousel.bigImg,placeholder:o.carousel.midImg},null,8,["src","placeholder"])],4),g("div",{class:"title",ref_key:"titleDom",ref:s},B(o.carousel.title),513),g("div",{class:"description",ref_key:"desc",ref:v},B(o.carousel.description),513)],544))}});const Z=b(Q,[["__scopeId","data-v-1c1e0aa3"]]);async function ee(){return await V.get("/api/banner")}const te=F("banner",()=>O(ee)),ae={class:"indicator"},le=["onClick"],ne=I({__name:"index",setup(R){const o=te(),{loadingRef:d,dataRef:i}=X(o),{fetchData:l}=o;l();const e=t(0),c=t(0),u=t(!1),s=t(null);Y(()=>{var n;c.value=(n=s.value)==null?void 0:n.clientHeight,window.addEventListener("resize",y)}),N(()=>{window.removeEventListener("resize",y)});const v=$(()=>-e.value*c.value+"px"),_=n=>{e.value=n},x=n=>{u.value||(n.deltaY>0&&e.value<i.value.length-1?(u.value=!0,e.value++):n.deltaY<0&&e.value>0&&(u.value=!0,e.value--))},y=()=>{var n;c.value=(n=s.value)==null?void 0:n.clientHeight};return(n,r)=>{var k;const z=j("loading");return S((p(),f("div",{class:"home-container",ref_key:"home",ref:s,onWheel:x},[g("ul",{class:"homeItem",style:D({marginTop:w(v)}),onTransitionend:r[0]||(r[0]=h=>u.value=!1)},[(p(!0),f(H,null,E(w(i),h=>(p(),f("li",{key:h.id},[L(Z,{carousel:h},null,8,["carousel"])]))),128))],36),S(g("div",{class:"icon iconUp",onClick:r[1]||(r[1]=h=>_(e.value-1))},[L(M,{type:"arrowUp"})],512),[[T,e.value>0]]),S(g("div",{class:"icon iconDown",onClick:r[2]||(r[2]=h=>_(e.value+1))},[L(M,{type:"arrowDown"})],512),[[T,e.value<((k=w(i))==null?void 0:k.length)-1]]),g("ul",ae,[(p(!0),f(H,null,E(w(i),(h,a)=>(p(),f("li",{onClick:m=>_(a),class:A({active:e.value==a}),key:h.id},null,10,le))),128))])],32)),[[z,w(d)]])}}});const ie=b(ne,[["__scopeId","data-v-925b568f"]]);export{ie as default};
